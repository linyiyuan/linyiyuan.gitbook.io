{"compress":true,"commitItems":[["8676215b-5f25-4769-a2c1-b4c5ed934e36",1573538085626,"",[[1573538029011,["sirui-php@DESKTOP-PSVFMK8",[[1,0,"# Readme\n\n\n\n"]],[0,0],[11,11]]],[1573538049289,["sirui-php@DESKTOP-PSVFMK8",[[-1,11,"\n"],[1,12,"@"]],[11,11],[12,12]]],[1573538049470,["sirui-php@DESKTOP-PSVFMK8",[[1,12,"@"]],[12,12],[13,13]]],[1573538050029,["sirui-php@DESKTOP-PSVFMK8",[[-1,12,"@"]],[13,13],[12,12]]],[1573538050173,["sirui-php@DESKTOP-PSVFMK8",[[-1,11,"@"],[1,12,"\n"]],[12,12],[11,11]]],[1573538050502,["sirui-php@DESKTOP-PSVFMK8",[[-1,11,"\n"],[1,12,"#"]],[11,11],[12,12]]],[1573538050933,["sirui-php@DESKTOP-PSVFMK8",[[-1,11,"#"],[1,12,"\n"]],[12,12],[11,11]]],[1573538051108,["sirui-php@DESKTOP-PSVFMK8",[[-1,11,"\n"]],[11,11],[10,10]]],[1573538051262,["sirui-php@DESKTOP-PSVFMK8",[[-1,10,"\n"]],[10,10],[9,9]]],[1573538051621,["sirui-php@DESKTOP-PSVFMK8",[[-1,9,"\n"]],[9,9],[8,8]]],[1573538053039,["sirui-php@DESKTOP-PSVFMK8",[[-1,2,"Readme"]],[8,8],[2,2]]],[1573538054276,["sirui-php@DESKTOP-PSVFMK8",[[1,2,"前言"]],[2,2],[4,4]]],[1573538054438,["sirui-php@DESKTOP-PSVFMK8",[[1,5,"\n"]],[4,4],[5,5]]],[1573538058295,["sirui-php@DESKTOP-PSVFMK8",[[-1,5,"\n"],[1,6,"Http"]],[5,5],[9,9]]],[1573538059880,["sirui-php@DESKTOP-PSVFMK8",[[1,9,"Server"]],[9,9],[15,15]]]],null,"sirui-php@DESKTOP-PSVFMK8"],["1d455c18-de46-476d-b05a-966c33760f25",1573607605727,"# 前言\nHttpServer",[[1573607545981,["sirui-php@DESKTOP-PSVFMK8",[[-1,2,"前言\nHttp"],[1,9,"导言\nSwoole 的Server可以创建一个异步服务器程序，支持TCP，UDP，UNIXSOCKET 3种协议，支持IPV4，IPV6，支持SSL/TLS单向双向证书的隧道加密。\n\n注意： **请勿在使用Server创建之前调用其他异步IO的API，否则将会创建失败。可以在Server启动后OnWorkerStart回调函数中使用**\n\n > "],[1,15," 只能作用于php-cli环境中，其他环境会抛出致命错误"]],[0,15],[210,210]]],[1573607549745,["sirui-php@DESKTOP-PSVFMK8",[[-1,5,"Swoole 的Server可以创建一个异步服务器程序，支持TCP，UDP，UNIXSOCKET 3种协议，支持IPV4，IPV6，支持SSL/TLS单向双向证书的隧道加密。"],[-1,93,"\n注意： **请勿在使用Server创建之前调用其他异步IO的API，否则将会创建失败。可以在Server启动后OnWorkerStart回调函数中使用**\n\n > Server 只能作用于php-cli环境中，其他环境会抛出致命错误"]],[5,210],[5,5]]],[1573607555494,["sirui-php@DESKTOP-PSVFMK8",[[-1,5,"\n"],[1,6,"H"]],[5,5],[6,6]]],[1573607557667,["sirui-php@DESKTOP-PSVFMK8",[[1,6,"ttp/Ser"]],[6,6],[13,13]]],[1573607560626,["sirui-php@DESKTOP-PSVFMK8",[[-1,9,"/Ser"]],[13,13],[9,9]]],[1573607575905,["sirui-php@DESKTOP-PSVFMK8",[[1,9,"\\Server 是Server的子类，继承父类Server，所以父类"]],[9,9],[43,43]]],[1573607576479,["sirui-php@DESKTOP-PSVFMK8",[[-1,41,"父类"]],[43,43],[41,41]]],[1573607581696,["sirui-php@DESKTOP-PSVFMK8",[[1,41,"它可以使用父类的"]],[41,41],[49,49]]],[1573607585351,["sirui-php@DESKTOP-PSVFMK8",[[-1,42,"可以使用父类的"]],[49,49],[42,42]]],[1573607587066,["sirui-php@DESKTOP-PSVFMK8",[[1,42,"也同样的"]],[42,42],[46,46]]],[1573607587751,["sirui-php@DESKTOP-PSVFMK8",[[-1,45,"的"]],[46,46],[45,45]]],[1573607589777,["sirui-php@DESKTOP-PSVFMK8",[[1,45,"的继承的"]],[45,45],[49,49]]],[1573607590193,["sirui-php@DESKTOP-PSVFMK8",[[-1,48,"的"]],[49,49],[48,48]]],[1573607604539,["sirui-php@DESKTOP-PSVFMK8",[[1,48,"了父类的一些属性跟方法，需要注意"]],[48,48],[64,64]]],[1573607608344,["sirui-php@DESKTOP-PSVFMK8",[[1,66,"Http、"]],[66,66],[71,71]]],[1573607609192,["sirui-php@DESKTOP-PSVFMK8",[[-1,70,"、"]],[71,71],[70,70]]],[1573607615648,["sirui-php@DESKTOP-PSVFMK8",[[1,70,"\\Server对Http的支撑"]],[70,70],[85,85]]],[1573607616311,["sirui-php@DESKTOP-PSVFMK8",[[-1,83,"支撑"]],[85,85],[83,83]]],[1573607620900,["sirui-php@DESKTOP-PSVFMK8",[[1,83,"支持并不完整 "]],[83,83],[90,90]]],[1573607621318,["sirui-php@DESKTOP-PSVFMK8",[[-1,89," "]],[90,90],[89,89]]],[1573607626361,["sirui-php@DESKTOP-PSVFMK8",[[1,89,"，建议仅仅"]],[89,89],[94,94]]],[1573607626511,["sirui-php@DESKTOP-PSVFMK8",[[-1,93,"仅"]],[94,94],[93,93]]],[1573607626546,["sirui-php@DESKTOP-PSVFMK8",[[1,93,"="]],[93,93],[94,94]]],[1573607626977,["sirui-php@DESKTOP-PSVFMK8",[[-1,93,"="]],[94,94],[93,93]]],[1573607631417,["sirui-php@DESKTOP-PSVFMK8",[[1,93,"作为引用服务器"]],[93,93],[100,100]]],[1573607632319,["sirui-php@DESKTOP-PSVFMK8",[[-1,95,"引用服务器"]],[100,100],[95,95]]],[1573607645683,["sirui-php@DESKTOP-PSVFMK8",[[1,95,"应用服务器。并在前端  增加Nginx带来"]],[95,95],[116,116]]],[1573607646192,["sirui-php@DESKTOP-PSVFMK8",[[-1,114,"带来"]],[116,116],[114,114]]],[1573607651297,["sirui-php@DESKTOP-PSVFMK8",[[1,114,"代理，配合Nginx一起使用"]],[114,114],[128,128]]],[1573607654759,["sirui-php@DESKTOP-PSVFMK8",[[1,128,"\n\n"]],[128,128],[129,129]]],[1573607654881,["sirui-php@DESKTOP-PSVFMK8",[[1,130,"\n"]],[129,129],[130,130]]],[1573607844658,[null,[[1,64,"的是"],[-1,68,"、"],[-1,82,"支"]],[64,64],[82,82]]],[1573607844659,[null,[[-1,64,"的是"],[1,70,"、"],[1,83,"支"]],[82,82],[64,64]]],[1573607811468,["sirui-php@DESKTOP-PSVFMK8",[[-1,130,"\n"],[1,131,"#"]],[130,130],[131,131]]],[1573607811481,["sirui-php@DESKTOP-PSVFMK8",[[1,131,"@"]],[131,131],[132,132]]],[1573607812000,["sirui-php@DESKTOP-PSVFMK8",[[-1,131,"@"]],[132,132],[131,131]]],[1573607812136,["sirui-php@DESKTOP-PSVFMK8",[[-1,130,"#"],[1,131,"\n"]],[131,131],[130,130]]],[1573607812323,["sirui-php@DESKTOP-PSVFMK8",[[-1,130,"\n"],[1,131,"#"]],[130,130],[131,131]]],[1573607812540,["sirui-php@DESKTOP-PSVFMK8",[[1,131,"#"]],[131,131],[132,132]]],[1573607813034,["sirui-php@DESKTOP-PSVFMK8",[[-1,131,"#"]],[132,132],[131,131]]],[1573607813352,["sirui-php@DESKTOP-PSVFMK8",[[1,131," "]],[131,131],[132,132]]],[1573607819495,["sirui-php@DESKTOP-PSVFMK8",[[-1,131," "]],[132,132],[131,131]]],[1573607820226,["sirui-php@DESKTOP-PSVFMK8",[[-1,130,"#"],[1,131,"\n"]],[131,131],[130,130]]],[1573607820608,["sirui-php@DESKTOP-PSVFMK8",[[-1,130,"\n"]],[130,130],[129,129]]],[1573607823504,["sirui-php@DESKTOP-PSVFMK8",[[1,130,"\n"]],[129,129],[130,130]]],[1573607823932,["sirui-php@DESKTOP-PSVFMK8",[[-1,130,"\n"],[1,131,"#"]],[130,130],[131,131]]],[1573607824150,["sirui-php@DESKTOP-PSVFMK8",[[1,131,"#"]],[131,131],[132,132]]],[1573607824528,["sirui-php@DESKTOP-PSVFMK8",[[-1,131,"#"]],[132,132],[131,131]]],[1573607825796,["sirui-php@DESKTOP-PSVFMK8",[[1,131," 性能"]],[131,131],[134,134]]],[1573607826056,["sirui-php@DESKTOP-PSVFMK8",[[1,134,"\n\n"]],[134,134],[135,135]]],[1573607829644,["sirui-php@DESKTOP-PSVFMK8",[[1,135,"通过使用`apache bench`工具进行压力测试，在`Inter Core-I5 4`核 + `8G`内存的普通PC机器上，`Http\\Server`可以达到近`11`万`QPS`。远远超过`php-fpm`，`Golang`、`Node.js`自带`Http`服务器。性能几乎接近与`Nginx`的静态文件处理。\n\n```\nab -c 200 -n 200000 -k http://127.0.0.1:9501/\n```"]],[135,135],[349,349]]],[1573607834431,["sirui-php@DESKTOP-PSVFMK8",[[1,350,"\n"]],[349,349],[350,350]]],[1573607834607,["sirui-php@DESKTOP-PSVFMK8",[[1,351,"\n"]],[350,350],[351,351]]],[1573607835697,["sirui-php@DESKTOP-PSVFMK8",[[-1,183," "],[1,184," "],[-1,351,"\n"],[1,352,"#"]],[351,351],[352,352]]],[1573607841941,["sirui-php@DESKTOP-PSVFMK8",[[1,352," Nginx+Swoole配置"]],[352,352],[367,367]]],[1573607904658,[null,[[1,64,"的是"],[-1,68,"、"],[-1,82,"支"]],[64,64],[82,82]]],[1573607904658,[null,[[-1,64,"的是"],[1,70,"、"],[1,83,"支"]],[82,82],[64,64]]],[1573607849518,["sirui-php@DESKTOP-PSVFMK8",[[1,367,"\n\n"]],[367,367],[368,368]]],[1573607849720,["sirui-php@DESKTOP-PSVFMK8",[[1,368,"```\nserver {\n    root /data/wwwroot/;\n    server_name local.swoole.com;\n\n    location / {\n        proxy_http_version 1.1;\n        proxy_set_header Connection \"keep-alive\";\n        proxy_set_header X-Real-IP $remote_addr;\n        if (!-e $request_filename) {\n             proxy_pass http://127.0.0.1:9501;\n        }\n    }\n}\n\n```\n\n> 通过读取`$request->header['x-real-ip']`来获取客户端的真实`IP`"]],[368,368],[747,747]]],[1573607852030,["sirui-php@DESKTOP-PSVFMK8",[[1,748,"\n"]],[747,747],[748,748]]],[1573607852295,["sirui-php@DESKTOP-PSVFMK8",[[1,749,"\n"]],[748,748],[749,749]]],[1573607854719,["sirui-php@DESKTOP-PSVFMK8",[[-1,749,"\n"],[1,750,"#"]],[749,749],[750,750]]],[1573607856541,["sirui-php@DESKTOP-PSVFMK8",[[1,750," 常见问题"]],[750,750],[755,755]]],[1573607856713,["sirui-php@DESKTOP-PSVFMK8",[[1,755,"\n\n"]],[755,755],[756,756]]],[1573607858978,["sirui-php@DESKTOP-PSVFMK8",[[-1,756,"\n"],[1,757,"#"]],[756,756],[757,757]]],[1573607878712,["sirui-php@DESKTOP-PSVFMK8",[[1,757,"# 1. # CURL发送POST请求服务器端超时"]],[757,757],[782,782]]],[1573607881472,["sirui-php@DESKTOP-PSVFMK8",[[-1,762,"# "]],[764,764],[762,762]]],[1573607887343,["sirui-php@DESKTOP-PSVFMK8",[[1,756,"\n"]],[755,755],[756,756]]],[1573607892390,["sirui-php@DESKTOP-PSVFMK8",[[1,368,"\n"]],[367,367],[368,368]]],[1573607893782,["sirui-php@DESKTOP-PSVFMK8",[[1,135,"\n"]],[134,134],[135,135]]],[1573607895159,["sirui-php@DESKTOP-PSVFMK8",[[1,5,"\n"]],[4,4],[5,5]]],[1573607944474,[null,[[1,65,"的是"],[-1,69,"、"],[-1,83,"支"]],[65,65],[83,83]]],[1573607944474,[null,[[-1,65,"的是"],[1,71,"、"],[1,84,"支"]],[83,83],[65,65]]],[1573607919782,["sirui-php@DESKTOP-PSVFMK8",[[1,784,"\n\n"]],[784,784],[785,785]]],[1573607919927,["sirui-php@DESKTOP-PSVFMK8",[[1,786,"\n"]],[785,785],[786,786]]],[1573607920129,["sirui-php@DESKTOP-PSVFMK8",[[1,786,"`CURL`在发送较大的`POST`请求时会先发一个`100-continue`的请求，如果收到服务器的回应才会发送实际的`POST`数据。而`swoole_http_server`不支持`100-continue`，就会导致CURL请求超时。\n\n解决办法是关闭`CURL`的`100-continue`\n\n```\n// 创建一个新cURL资源\n$ch = curl_init();\n// 设置URL和相应的选项\ncurl_setopt($ch, CURLOPT_URL, \"http://127.0.0.1:9501\");\ncurl_setopt($ch, CURLOPT_HEADER, 0);\ncurl_setopt($ch, CURLOPT_POST, 1); //设置为POST方式\ncurl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));\ncurl_setopt($ch, CURLOPT_POSTFIELDS, array('test' => str_repeat('a', 800000)));//POST数据\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n```"]],[786,786],[1328,1328]]],[1573607927326,["sirui-php@DESKTOP-PSVFMK8",[[1,1329,"\n"]],[1328,1328],[1329,1329]]],[1573607927479,["sirui-php@DESKTOP-PSVFMK8",[[1,1330,"\n"]],[1329,1329],[1330,1330]]],[1573607927632,["sirui-php@DESKTOP-PSVFMK8",[[1,1331,"\n"]],[1330,1330],[1331,1331]]],[1573607927915,["sirui-php@DESKTOP-PSVFMK8",[[1,1331,"如果客户端是其他语言编写的，无法修改客户端去掉100-continue，那么还有2个方案可以解决此问题。\n\n*   使用Nginx做前端代理，由Nginx处理100-Continue\n*   重新编译Swoole启用100-Continue的支持，需要手工修改swoole_config.h，找到SW_HTTP_100_CONTINUE，去掉注释，执行make clean && make install\n\n> 启用100-CONTINUE后会额外消耗服务器的CPU资源"]],[1331,1331],[1566,1566]]],[1573607934366,["sirui-php@DESKTOP-PSVFMK8",[[1,1567,"\n"]],[1566,1566],[1567,1567]]],[1573607934519,["sirui-php@DESKTOP-PSVFMK8",[[1,1568,"\n"]],[1567,1567],[1568,1568]]],[1573607935199,["sirui-php@DESKTOP-PSVFMK8",[[-1,1568,"\n"],[1,1569,"2"]],[1568,1568],[1569,1569]]],[1573607936262,["sirui-php@DESKTOP-PSVFMK8",[[-1,1568,"2"],[1,1569,"\n"]],[1569,1569],[1568,1568]]],[1573607936415,["sirui-php@DESKTOP-PSVFMK8",[[-1,1568,"\n"]],[1568,1568],[1567,1567]]],[1573607937054,["sirui-php@DESKTOP-PSVFMK8",[[1,1568,"\n"]],[1567,1567],[1568,1568]]],[1573607937360,["sirui-php@DESKTOP-PSVFMK8",[[-1,1568,"\n"],[1,1569,"#"]],[1568,1568],[1569,1569]]],[1573607942967,["sirui-php@DESKTOP-PSVFMK8",[[1,1569,"# 2. # 使用Chrome访问服务器会产生2次请求"]],[1569,1569],[1596,1596]]],[1573607944207,["sirui-php@DESKTOP-PSVFMK8",[[-1,1574,"# "]],[1576,1576],[1574,1574]]],[1573607982770,[null,[[1,65,"的是"],[-1,69,"、"],[-1,83,"支"]],[65,65],[83,83]]],[1573607982770,[null,[[-1,65,"的是"],[1,71,"、"],[1,84,"支"]],[83,83],[65,65]]],[1573607948878,["sirui-php@DESKTOP-PSVFMK8",[[1,1594,"\n\n"]],[1594,1594],[1595,1595]]],[1573607949008,["sirui-php@DESKTOP-PSVFMK8",[[1,1596,"\n"]],[1595,1595],[1596,1596]]],[1573607949153,["sirui-php@DESKTOP-PSVFMK8",[[1,1596,"这是因为`Chrome`浏览器会自动请求一次`favicon.ico`，所以服务器会收到`2`个`Request`，通过打印`$req->server['request_uri']` 能看到请求的`URL`路径。\n\n## 屏蔽 favicon.ico\n\n```\n$uri = $req->server['request_uri'];\nif ($uri == '/favicon.ico') {\n    $res->status(404);\n    $res->end();\n}\n\n```\n\n> 上述示例代码中，$req 为 Http\\Request 对象，$res 为 Http\\Response 对象"]],[1596,1596],[1897,1897]]],[1573607962511,["sirui-php@DESKTOP-PSVFMK8",[[1,1898,"\n"]],[1897,1897],[1898,1898]]],[1573607962687,["sirui-php@DESKTOP-PSVFMK8",[[1,1899,"\n"]],[1898,1898],[1899,1899]]],[1573607963472,["sirui-php@DESKTOP-PSVFMK8",[[-1,1687," "],[1,1688," "],[-1,1899,"\n"],[1,1900,"#"]],[1899,1899],[1900,1900]]],[1573607963853,["sirui-php@DESKTOP-PSVFMK8",[[1,1900,"##"]],[1900,1900],[1902,1902]]],[1573607964353,["sirui-php@DESKTOP-PSVFMK8",[[-1,1901,"#"]],[1902,1902],[1901,1901]]],[1573607965857,["sirui-php@DESKTOP-PSVFMK8",[[1,1901," 3.GET/POST请求的最大尺寸"]],[1901,1901],[1919,1919]]],[1573607971583,["sirui-php@DESKTOP-PSVFMK8",[[1,1919,"\n\n"]],[1919,1919],[1920,1920]]],[1573607971999,["sirui-php@DESKTOP-PSVFMK8",[[1,1920,"## GET请求最大8192\n\nGET请求只有一个Http头，swoole底层使用固定大小的内存缓存区8K，并且不可修改。如果请求不是正确的Http请求，将会出现错误。底层会抛出以下错误：\n\n```\nWARN swReactorThread_onReceive_http_request: http header is too long.\n\n```\n\n## POST/文件上传\n\n最大尺寸受到 `package_max_length` 配置项限制，默认为2M，可以调用`swoole_server->set`传入新的值修改尺寸。swoole底层是全内存的，因此如果设置过大可能会导致大量并发请求将服务器资源耗尽。 计算方法：`最大内存占用` = `最大并发请求数` * `package_max_length`"]],[1920,1920],[2275,2275]]],[1573607975976,["sirui-php@DESKTOP-PSVFMK8",[[1,1920,"\n"]],[1919,1919],[1920,1920]]],[1573607977985,["sirui-php@DESKTOP-PSVFMK8",[[1,1923,"#"],[-1,2117," "],[1,2118," "],[-1,2138," "],[1,2139," "],[-1,2241," = "],[1,2244," = "],[-1,2253," * "],[1,2256," * "]],[1923,1923],[1924,1924]]],[1573607979440,["sirui-php@DESKTOP-PSVFMK8",[[1,2100,"#"]],[2100,2100],[2101,2101]]]],null,"sirui-php@DESKTOP-PSVFMK8"],["3bd7d1d1-9595-4310-a9a8-40a3861fa9de",1573624959610,"# 导言\n\nHttp\\Server 是Server的子类，继承父类Server，所以它也同样的继承了父类的一些属性跟方法，需要注意的是Http\\Server对Http的支持并不完整，建议仅作为应用服务器。并在前端  增加Nginx代理，配合Nginx一起使用\n\n# 性能\n\n通过使用`apache bench`工具进行压力测试，在`Inter Core-I5 4`核 + `8G`内存的普通PC机器上，`Http\\Server`可以达到近`11`万`QPS`。远远超过`php-fpm`，`Golang`、`Node.js`自带`Http`服务器。性能几乎接近与`Nginx`的静态文件处理。\n\n```\nab -c 200 -n 200000 -k http://127.0.0.1:9501/\n```\n\n# Nginx+Swoole配置\n\n```\nserver {\n    root /data/wwwroot/;\n    server_name local.swoole.com;\n\n    location / {\n        proxy_http_version 1.1;\n        proxy_set_header Connection \"keep-alive\";\n        proxy_set_header X-Real-IP $remote_addr;\n        if (!-e $request_filename) {\n             proxy_pass http://127.0.0.1:9501;\n        }\n    }\n}\n\n```\n\n> 通过读取`$request->header['x-real-ip']`来获取客户端的真实`IP`\n\n# 常见问题\n\n## 1. CURL发送POST请求服务器端超时\n\n`CURL`在发送较大的`POST`请求时会先发一个`100-continue`的请求，如果收到服务器的回应才会发送实际的`POST`数据。而`swoole_http_server`不支持`100-continue`，就会导致CURL请求超时。\n\n解决办法是关闭`CURL`的`100-continue`\n\n```\n// 创建一个新cURL资源\n$ch = curl_init();\n// 设置URL和相应的选项\ncurl_setopt($ch, CURLOPT_URL, \"http://127.0.0.1:9501\");\ncurl_setopt($ch, CURLOPT_HEADER, 0);\ncurl_setopt($ch, CURLOPT_POST, 1); //设置为POST方式\ncurl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));\ncurl_setopt($ch, CURLOPT_POSTFIELDS, array('test' => str_repeat('a', 800000)));//POST数据\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n```\n\n\n如果客户端是其他语言编写的，无法修改客户端去掉100-continue，那么还有2个方案可以解决此问题。\n\n*   使用Nginx做前端代理，由Nginx处理100-Continue\n*   重新编译Swoole启用100-Continue的支持，需要手工修改swoole_config.h，找到SW_HTTP_100_CONTINUE，去掉注释，执行make clean && make install\n\n> 启用100-CONTINUE后会额外消耗服务器的CPU资源\n\n## 2. 使用Chrome访问服务器会产生2次请求\n\n这是因为`Chrome`浏览器会自动请求一次`favicon.ico`，所以服务器会收到`2`个`Request`，通过打印`$req->server['request_uri']` 能看到请求的`URL`路径。\n\n## 屏蔽 favicon.ico\n\n```\n$uri = $req->server['request_uri'];\nif ($uri == '/favicon.ico') {\n    $res->status(404);\n    $res->end();\n}\n\n```\n\n> 上述示例代码中，$req 为 Http\\Request 对象，$res 为 Http\\Response 对象\n\n## 3.GET/POST请求的最大尺寸\n\n### GET请求最大8192\n\nGET请求只有一个Http头，swoole底层使用固定大小的内存缓存区8K，并且不可修改。如果请求不是正确的Http请求，将会出现错误。底层会抛出以下错误：\n\n```\nWARN swReactorThread_onReceive_http_request: http header is too long.\n\n```\n\n### POST/文件上传\n\n最大尺寸受到 `package_max_length` 配置项限制，默认为2M，可以调用`swoole_server->set`传入新的值修改尺寸。swoole底层是全内存的，因此如果设置过大可能会导致大量并发请求将服务器资源耗尽。 计算方法：`最大内存占用` = `最大并发请求数` * `package_max_length`\n",[[1573624933152,["sirui-php@DESKTOP-PSVFMK8",[[1,129,","]],[129,129],[130,130]]],[1573624933295,["sirui-php@DESKTOP-PSVFMK8",[[1,132,"\n"]],[130,130],[131,131]]],[1573624933733,["sirui-php@DESKTOP-PSVFMK8",[[1,131,"`Http\\Server`支持同步和异步2种模式。"]],[131,131],[156,156]]],[1573624945343,["sirui-php@DESKTOP-PSVFMK8",[[1,158,"\n"]],[156,156],[157,157]]],[1573624945511,["sirui-php@DESKTOP-PSVFMK8",[[1,159,"\n"]],[157,157],[158,158]]],[1573624946424,["sirui-php@DESKTOP-PSVFMK8",[[1,158,"# "]],[158,158],[160,160]]],[1573624952707,["sirui-php@DESKTOP-PSVFMK8",[[1,157,"## 同步模式"],[1,158,"\n这种模式等同于`nginx+php-fpm/apache`，它需要设置大量`Worker`进程来完成并发请求处理。`Worker`进程内可以使用同步阻塞`IO`，编程方式与普通`PHP` `Web`程序完全一致。\n\n与`php-fpm/apache`不同的是，客户端连接并不会独占进程，服务器依然可以应对大量并发连接。\n\n#"],[1,160,"异步模式\n\n这种模式下整个服务器是异步非阻塞的，服务器可以应对大规模的并发连接和并发请求。但编程方式需要完全使用异步`API`，如`MySQL`、`redis`、`http_client`、`file_get_contents`、`sleep`等阻塞`IO`操作必须切换为异步的方式，如异步`Client`，`Event`，`Timer`等`API`。"]],[157,160],[506,506]]],[1573624954816,["sirui-php@DESKTOP-PSVFMK8",[[1,157,"\n"]],[156,156],[157,157]]],[1573624956464,["sirui-php@DESKTOP-PSVFMK8",[[-1,329,"#"]],[330,330],[329,329]]],[1573624957528,["sirui-php@DESKTOP-PSVFMK8",[[1,329,"#"]],[329,329],[330,330]]],[1573624961241,["sirui-php@DESKTOP-PSVFMK8",[[-1,329,"#"]],[329,329],[328,328]]],[1573624962954,["sirui-php@DESKTOP-PSVFMK8",[[1,329,"#"]],[328,328],[329,329]]]],null,"sirui-php@DESKTOP-PSVFMK8"]]}